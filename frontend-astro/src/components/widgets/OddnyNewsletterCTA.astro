---
interface Props {
  block: any;
  locale: string;
  getImageUrl: (id: string) => string;
  setAttr: (opts: any) => string;
}

const { block, locale, getImageUrl, setAttr } = Astro.props;

// Get localized text values
const getLocalizedField = (block: any, fieldName: string) => {
  const localizedFieldName = `${fieldName}_${locale}`;
  return block[localizedFieldName] || block[fieldName] || '';
};

const heading = getLocalizedField(block, 'heading');
const content = getLocalizedField(block, 'content');
const buttonText = getLocalizedField(block, 'button_text');
const placeholder = getLocalizedField(block, 'placeholder');
---

<section 
  class="oddny-newsletter-cta"
  data-directus={setAttr({ collection: 'blocks', item: block.id, mode: 'drawer' })}
>
  <style>
    .oddny-newsletter-cta {
      position: relative;
      width: 100%;
      min-height: 600px;
      background: white;
      overflow: hidden;
      font-family: 'Neue Haas Grotesk Display Pro', sans-serif;
      padding: 60px 0;
    }
    
    .newsletter-container {
      max-width: 1440px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      align-items: center;
      padding: 0 80px;
    }
    
    /* Left Side - Bear */
    .newsletter-bear {
      width: 100%;
      max-width: 500px;
      height: auto;
    }
    
    .newsletter-bear svg {
      width: 100%;
      height: auto;
    }
    
    /* Right Side - Content */
    .newsletter-content {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    
    .newsletter-title {
      font-family: 'Neue Haas Grotesk Display Pro', sans-serif;
      font-weight: 500;
      font-size: 80px;
      line-height: 85px;
      color: #42383e;
      margin: 0;
    }
    
    .newsletter-text {
      font-family: 'Neue Haas Grotesk Display Pro', sans-serif;
      font-weight: 500;
      font-size: 28px;
      line-height: 30px;
      color: #888484;
      margin: 0;
    }
    
    .newsletter-text p {
      margin: 0 0 4px 0;
    }
    
    .newsletter-form {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .newsletter-email {
      flex: 1;
      height: 45px;
      background: rgba(217, 217, 217, 0.72);
      border: none;
      border-radius: 4px;
      padding: 0 15px;
      font-family: 'Neue Haas Grotesk Display Pro', sans-serif;
      font-size: 16px;
      color: #42383e;
      outline: none;
    }
    
    .newsletter-email::placeholder {
      color: #42383e;
      opacity: 0.7;
    }
    
    .newsletter-button {
      height: 45px;
      background: #42383e;
      border: none;
      border-radius: 4px;
      padding: 0 20px;
      color: white;
      font-family: 'Neue Haas Grotesk Display Pro', sans-serif;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background-color 0.3s ease;
      text-decoration: none;
    }
    
    .newsletter-button:hover {
      background: #2d262a;
    }
    
    .newsletter-button svg {
      width: 14px;
      height: 14px;
    }
    
    /* Responsive Design */
    @media (max-width: 1200px) {
      .newsletter-container {
        padding: 0 40px;
        gap: 40px;
      }
      .newsletter-title {
        font-size: clamp(50px, 6vw, 80px);
        line-height: clamp(55px, 6.5vw, 85px);
      }
      .newsletter-text {
        font-size: clamp(20px, 2.5vw, 28px);
        line-height: clamp(24px, 3vw, 30px);
      }
    }
    
    @media (max-width: 768px) {
      .oddny-newsletter-cta {
        min-height: auto;
        padding: 40px 0;
      }
      .newsletter-container {
        grid-template-columns: 1fr;
        gap: 40px;
        padding: 0 20px;
        text-align: center;
      }
      .newsletter-bear {
        max-width: 300px;
        margin: 0 auto;
      }
      .newsletter-title {
        font-size: 42px;
        line-height: 46px;
      }
      .newsletter-text {
        font-size: 20px;
        line-height: 24px;
      }
      .newsletter-form {
        flex-direction: column;
        gap: 15px;
        align-items: center;
        max-width: 400px;
        margin: 0 auto;
      }
      .newsletter-email {
        width: 100%;
        max-width: 350px;
      }
      .newsletter-button {
        width: fit-content;
        min-width: 120px;
      }
    }
    
    @media (max-width: 480px) {
      .oddny-newsletter-cta {
        padding: 30px 0;
      }
      .newsletter-container {
        gap: 25px;
        padding: 0 15px;
      }
      .newsletter-bear {
        max-width: 220px;
      }
      .newsletter-title {
        font-size: 28px;
        line-height: 32px;
      }
      .newsletter-text {
        font-size: 16px;
        line-height: 20px;
      }
      .newsletter-form {
        max-width: 320px;
      }
      .newsletter-email {
        height: 40px;
        font-size: 14px;
        max-width: 280px;
      }
      .newsletter-button {
        height: 40px;
        padding: 0 16px;
        font-size: 13px;
        min-width: 100px;
      }
    }
  </style>
  
  <div class="newsletter-container">
    {/* Left Side - Bear Illustration */}
    <div class="newsletter-bear">
      <svg width="718" height="661" viewBox="0 0 718 661" fill="none">
<g clipPath="url(#clip0_4343_7096)">
<path d="M509.718 214.611L551.699 184.706L551.956 185.493C552.179 186.178 552.247 186.863 552.213 187.565L548.157 246.913C548.105 247.7 547.883 248.453 547.506 249.155L547.13 249.857L509.735 214.611H509.718Z" fill="#91DBD4"/>
<path d="M551.357 185.681C551.545 186.263 551.631 186.88 551.58 187.53L547.523 246.878C547.472 247.597 547.267 248.282 546.941 248.881L510.659 214.696L551.357 185.699M552.007 183.73L550.655 184.689L509.957 213.686L508.759 214.542L509.837 215.552L546.12 249.737L547.267 250.833L548.02 249.429C548.43 248.659 548.67 247.82 548.739 246.947L552.795 187.599C552.846 186.828 552.76 186.058 552.521 185.305L552.024 183.713L552.007 183.73Z" fill="white"/>
<path d="M542.167 252.116L439.121 245.063C438.727 245.029 438.351 244.977 437.992 244.875L436.759 244.532L478.57 214.747L491.902 227.312L506.808 216.681L544.306 252.013L542.92 252.116C542.766 252.116 542.629 252.116 542.475 252.116C542.372 252.116 542.252 252.116 542.15 252.116H542.167Z" fill="#91DBD4"/>
<path d="M478.535 215.518L491.868 228.082L506.791 217.452L542.92 251.5C542.783 251.5 542.646 251.5 542.509 251.5C542.406 251.5 542.321 251.5 542.218 251.5L439.172 244.447C438.83 244.43 438.488 244.362 438.163 244.276L478.518 215.518M478.638 213.96L477.834 214.542L437.478 243.3L435.407 244.772L437.855 245.457C438.265 245.577 438.676 245.645 439.104 245.68L542.15 252.732C542.269 252.732 542.389 252.732 542.509 252.732C542.68 252.732 542.834 252.732 543.005 252.715L545.778 252.527L543.758 250.627L507.63 216.579L506.911 215.894L506.107 216.476L492.005 226.525L479.391 214.645L478.672 213.96H478.638Z" fill="white"/>
<path d="M441.346 174.88L442.509 174.657C442.869 174.589 443.228 174.555 443.588 174.555C443.707 174.555 443.827 174.555 443.947 174.555L546.993 181.607C547.369 181.624 547.729 181.693 548.071 181.796L549.303 182.138L492.21 222.827L441.346 174.897V174.88Z" fill="#91DBD4"/>
<path d="M443.588 175.154C443.69 175.154 443.793 175.154 443.913 175.154L546.958 182.206C547.284 182.224 547.609 182.292 547.934 182.378L505.627 212.522L492.278 222.04L480.349 210.794L442.629 175.257C442.937 175.188 443.262 175.154 443.588 175.154ZM443.588 173.938C443.194 173.938 442.8 173.973 442.39 174.058L440.062 174.503L441.791 176.13L479.511 211.667L491.439 222.913L492.158 223.598L492.963 223.016L506.312 213.498L548.619 183.353L550.707 181.864L548.225 181.197C547.831 181.094 547.421 181.025 547.027 180.991L443.981 173.938C443.844 173.938 443.707 173.938 443.57 173.938H443.588Z" fill="white"/>
<path d="M434.175 241.127C433.969 240.459 433.884 239.774 433.935 239.09L437.991 179.742C438.025 179.142 438.162 178.56 438.402 177.995L438.744 177.174L476.002 212.283L434.431 241.914L434.175 241.11V241.127Z" fill="#91DBD4"/>
<path d="M438.967 178.235L475.044 212.231L434.757 240.938C434.585 240.373 434.5 239.757 434.534 239.124L438.59 179.775C438.624 179.228 438.761 178.697 438.95 178.218M438.522 176.146L437.854 177.773C437.598 178.389 437.444 179.039 437.392 179.707L433.336 239.055C433.285 239.808 433.37 240.579 433.61 241.315L434.106 242.924L435.475 241.948L475.763 213.241L476.961 212.385L475.882 211.375L439.805 177.379L438.522 176.164V176.146Z" fill="white"/>
<path d="M425.823 484.049L398.491 583.367L407.459 583.847C407.613 583.847 407.75 583.932 407.819 584.052L423.975 608.89L477.149 611.527L500.082 562.946L425.823 484.049Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M95.5153 559.984L163.237 563.904C163.425 563.904 163.579 564.024 163.648 564.195L181.772 610.037L197.688 600.605L91.0484 236.762L42.1697 293.748L27.2117 391.166L5.21973 553.085L24.0456 592.713L127.314 642.133L95.0874 560.634C95.036 560.48 95.0532 560.326 95.1387 560.189C95.2243 560.069 95.3612 560.001 95.5153 560.001C95.5153 560.001 95.5324 560.001 95.5495 560.001L95.5153 559.984Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M219.013 589.119L257.075 597.25C269.825 475.455 266.06 390.088 245.198 328.669C226.012 272.128 193.786 239.775 156.75 206.241L125.91 191.365L91.7329 235.872L198.475 600.109L218.67 589.153C218.67 589.153 218.807 589.102 218.893 589.102C218.927 589.102 218.961 589.102 218.996 589.102L219.013 589.119Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M346.241 580.56L397.55 583.316L414.699 521.623C421.733 496.288 429.058 469.087 434.894 441.784C442.013 408.455 443.759 374.254 440.114 340.138C436.503 306.484 427.723 273.651 414.014 242.514L365.94 307.596L324.78 380.279L332.841 589.769L345.967 580.645C345.967 580.645 346.139 580.56 346.224 580.56C346.224 580.56 346.224 580.56 346.241 580.56Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M346.344 581.501L314.682 603.635L313.433 627.018L439.052 633.779L407.185 584.788L346.361 581.518L346.344 581.501Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M560.154 567.482L516.512 530.318L478.073 611.766L505.268 622.944L541.876 611.92L560.154 567.482Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M181.019 610.671L162.877 564.812L96.1826 560.96L133.766 655.982L161.833 644.872L181.019 610.671Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M218.996 590.077L198.407 601.255L183.62 610.003L178.435 634.293L301.453 660.569L278.52 602.796L218.996 590.077Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M323.77 380.399L212.047 263.329C222.864 278.564 228.255 286.421 237.086 305.747C244.342 321.616 249.631 337.518 254.166 357.375C257.212 370.71 266.454 411.263 265.016 493.275C264.417 527.819 262.039 562.757 257.931 597.455L278.879 601.94C279.033 601.974 279.153 602.077 279.221 602.231L281.617 608.479L313.433 608.616L313.707 603.549C313.707 603.412 313.792 603.275 313.912 603.19L331.882 590.591L323.787 380.416L323.77 380.399Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M404.875 7.44922L375.763 31.4315C383.259 34.4957 390.293 38.4842 397.036 42.9519C402.821 46.8035 408.332 51.1686 413.398 55.9445L425.515 34.975L404.875 7.46634V7.44922Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M449.988 129.449L434.534 152.421L458.529 166.407L467.719 147.611L449.988 129.432V129.449Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M434.534 152.422L449.988 129.449L467.719 147.629L458.529 166.424L434.534 152.422Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M449.338 128.764L433.49 152.319C433.422 152.421 433.387 152.558 433.422 152.678C433.456 152.798 433.524 152.918 433.644 152.969L458.135 167.246L446.908 190.201H416.205L394.435 165.705V72.4805L449.355 128.764H449.338Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M378.108 97.0449C380.761 97.0449 382.917 99.2018 382.917 101.855C382.917 104.508 380.761 106.665 378.108 106.665C375.455 106.665 373.299 104.508 373.299 101.855C373.299 99.2018 375.455 97.0449 378.108 97.0449Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M252.163 128.524L351.649 222.228L413.398 188.54L393.596 166.201C393.596 166.201 393.477 166.013 393.477 165.893V71.3503C393.477 71.162 393.596 70.9908 393.768 70.9224C393.939 70.8539 394.144 70.8881 394.281 71.0251L440.661 118.562C440.524 117.774 440.387 116.901 440.233 115.96C438.282 103.977 434.654 81.6896 419.285 63.6815C402.958 44.5607 379.665 33.1943 369.602 29.8563C348.808 22.0163 325.995 19.0206 303.575 21.1946L311.601 31.9104C311.721 32.0645 311.721 32.2528 311.636 32.424L299.074 54.181C299.005 54.3179 298.868 54.4035 298.714 54.4035L267.549 57.1595C267.344 57.1595 267.155 57.0568 267.087 56.8685L258.478 34.0502L252.18 128.542L252.163 128.524ZM424.676 97.9003C424.676 95.4696 426.661 93.4839 429.092 93.4839C431.522 93.4839 433.507 95.4696 433.507 97.9003C433.507 100.348 431.522 102.317 429.092 102.317C426.661 102.317 424.676 100.331 424.676 97.9003ZM372.375 101.855C372.375 98.6878 374.942 96.1029 378.108 96.1029C381.274 96.1029 383.858 98.6878 383.858 101.855C383.858 105.021 381.274 107.606 378.108 107.606C374.942 107.606 372.375 105.021 372.375 101.855Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M429.109 94.4082C431.043 94.4082 432.6 95.983 432.6 97.9003C432.6 99.8346 431.026 101.392 429.109 101.392C427.192 101.392 425.618 99.8175 425.618 97.9003C425.618 95.9659 427.192 94.4082 429.109 94.4082Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M310.677 32.2017L289.832 4.40204L280.556 0.430664L262.86 13.0295L258.496 31.38L267.806 56.184L298.389 53.4793L310.677 32.2017Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M406.21 193.522L351.803 223.204C351.632 223.307 351.41 223.273 351.256 223.136L251.359 129.056C251.256 128.953 251.205 128.816 251.222 128.679L257.862 32.0479L126.39 190.509L157.127 205.333C157.127 205.333 157.196 205.368 157.23 205.402C163.049 210.469 180.163 226.269 193.067 240.22C202.395 250.285 208.744 258.673 208.778 258.724L324.198 379.406L365.17 307.066L413.672 241.418L406.244 193.539L406.21 193.522Z" fill="#00FC26" stroke="white" stroke-width="0.71" stroke-miterlimit="10"/>
<path d="M606.249 606.77L642.48 581.915L642.839 582.24C643.233 582.583 643.472 582.993 643.558 583.439L649.599 614.011C649.702 614.508 649.599 615.038 649.308 615.552L649.086 615.946L606.249 606.753V606.77Z" fill="#91DBD4"/>
<path d="M642.429 582.685C642.702 582.925 642.891 583.216 642.959 583.558L649 614.131C649.069 614.507 649 614.884 648.778 615.261L607.772 606.462L642.446 582.668M642.531 581.145L641.744 581.692L607.07 605.486L604.743 607.078L607.498 607.677L648.504 616.476L649.377 616.664L649.822 615.894C650.181 615.261 650.301 614.576 650.181 613.925L644.14 583.353C644.02 582.771 643.712 582.24 643.233 581.812L642.531 581.179V581.145Z" fill="white"/>
<path d="M576.539 613.583L591.599 616.819L604.298 608.105L647.837 617.452L645.407 618.102C645.185 618.171 644.945 618.222 644.705 618.274L543.388 638.302C543.029 638.37 542.669 638.421 542.31 638.456L540.017 638.661L576.522 613.617L576.539 613.583Z" fill="#91DBD4"/>
<path d="M604.452 608.756L645.287 617.52C645.065 617.571 644.842 617.64 644.62 617.674L543.302 637.702C542.96 637.771 542.618 637.822 542.293 637.839L576.675 614.25L591.736 617.486L604.452 608.773M604.195 607.455L603.767 607.746L591.496 616.168L576.932 613.052L576.419 612.949L575.991 613.241L541.608 636.829L537.809 639.431L542.412 639.037C542.789 639.003 543.165 638.952 543.542 638.883L644.859 618.855C645.116 618.804 645.373 618.735 645.612 618.667L650.404 617.349L645.544 616.305L604.709 607.54L604.195 607.438V607.455Z" fill="white"/>
<path d="M532.76 602.456L534.813 601.737C535.224 601.6 535.669 601.48 536.131 601.377L637.448 581.366C637.791 581.298 638.15 581.246 638.475 581.212L640.786 581.007L591.257 615.003L532.76 602.456Z" fill="#91DBD4"/>
<path d="M638.527 581.829L602.484 606.547L591.103 614.353L577.616 611.46L534.984 602.319C535.378 602.182 535.789 602.062 536.217 601.977L637.534 581.949C637.859 581.88 638.184 581.846 638.509 581.812M643.045 580.186L638.407 580.613C638.047 580.648 637.671 580.699 637.311 580.768L535.994 600.796C535.532 600.881 535.053 601.018 534.591 601.172L530.483 602.593L534.728 603.5L577.36 612.641L590.846 615.534L591.359 615.637L591.787 615.346L603.168 607.54L639.211 582.822L643.045 580.186Z" fill="white"/>
<path d="M537.996 637.394C537.62 637.052 537.38 636.658 537.295 636.213L531.253 605.623C531.185 605.229 531.219 604.835 531.373 604.425L531.561 603.945L574.228 613.103L538.339 637.719L537.979 637.394H537.996Z" fill="#91DBD4"/>
<path d="M531.955 604.647L572.739 613.395L538.407 636.949C538.133 636.709 537.962 636.418 537.894 636.093L531.852 605.52C531.801 605.229 531.835 604.938 531.938 604.664M531.202 603.244L530.825 604.202C530.62 604.716 530.569 605.229 530.671 605.743L536.713 636.316C536.833 636.881 537.124 637.411 537.603 637.839L538.322 638.49L539.109 637.942L573.44 614.387L575.768 612.796L573.012 612.196L532.229 603.449L531.219 603.227L531.202 603.244Z" fill="white"/>
<path d="M668.591 577.17L713.174 569.433L713.311 569.98C713.448 570.511 713.431 571.042 713.277 571.521L701.913 607.383C701.741 607.931 701.399 608.393 700.886 608.77L700.458 609.095L668.574 577.17H668.591Z" fill="#91DBD4"/>
<path d="M712.712 570.135C712.814 570.545 712.814 570.956 712.712 571.333L701.348 607.195C701.211 607.64 700.92 608 700.543 608.291L669.857 577.564L712.729 570.135M713.619 568.748L712.506 568.936L669.635 576.366L667.324 576.759L668.967 578.42L699.653 609.147L700.406 609.9L701.245 609.266C701.844 608.821 702.272 608.222 702.477 607.572L713.841 571.709C714.029 571.11 714.046 570.477 713.875 569.844L713.601 568.765L713.619 568.748Z" fill="white"/>
<path d="M696.162 609.455C695.922 609.404 695.683 609.335 695.443 609.267L597.001 578.026C596.642 577.907 596.299 577.787 595.974 577.633L594.229 576.811L638.966 569.057L650.244 580.337L665.955 577.616L698.216 609.917L696.162 609.455Z" fill="#91DBD4"/>
<path d="M638.76 569.707L650.038 580.988L665.749 578.266L696.299 608.856C696.076 608.805 695.854 608.753 695.631 608.685L597.189 577.445C596.864 577.342 596.539 577.222 596.248 577.068L638.777 569.69M639.171 568.406L638.555 568.509L596.025 575.887L592.226 576.554L595.717 578.181C596.077 578.352 596.436 578.489 596.813 578.609L695.255 609.849C695.511 609.934 695.768 610.003 696.025 610.054L700.098 610.962L697.154 608.017L666.605 577.427L666.16 576.982L665.544 577.085L650.449 579.704L639.616 568.868L639.171 568.423V568.406Z" fill="white"/>
<path d="M607.492 534.443L609.289 534.7C609.734 534.769 610.179 534.854 610.641 535.008L709.083 566.249C709.426 566.351 709.751 566.488 710.059 566.625L711.839 567.447L650.963 578.009L607.475 534.46L607.492 534.443Z" fill="#91DBD4"/>
<path d="M609.204 535.3C609.614 535.351 610.025 535.454 610.453 535.591L708.895 566.831C709.22 566.934 709.511 567.054 709.802 567.191L665.236 574.928L651.168 577.359L641.088 567.259L609.204 535.317M605.781 533.588L608.348 536.156L640.232 568.098L650.312 578.197L650.757 578.642L651.374 578.54L665.442 576.109L710.007 568.372L713.841 567.704L710.298 566.078C709.956 565.924 709.597 565.787 709.237 565.667L610.795 534.427C610.333 534.273 609.854 534.17 609.341 534.101L605.747 533.588H605.781Z" fill="white"/>
<path d="M592.774 574.277C592.637 573.747 592.654 573.233 592.808 572.771L604.172 536.909C604.309 536.498 604.532 536.121 604.874 535.796L605.302 535.368L637.066 567.173L592.911 574.825L592.774 574.277Z" fill="#91DBD4"/>
<path d="M605.302 536.207L635.817 566.763L593.356 574.124C593.253 573.73 593.253 573.319 593.373 572.943L604.737 537.08C604.84 536.755 605.028 536.464 605.285 536.207M605.319 534.513L604.463 535.351C604.052 535.745 603.779 536.207 603.607 536.721L592.243 572.583C592.055 573.165 592.038 573.781 592.209 574.432L592.483 575.527L593.595 575.339L636.056 567.978L638.367 567.585L636.724 565.924L606.209 535.369L605.353 534.513H605.319Z" fill="white"/>
<path d="M520.831 473.541L521.362 473.712C521.892 473.883 522.32 474.157 522.645 474.534L546.246 502.676C546.605 503.104 546.811 503.652 546.862 504.268L546.896 504.781L503.152 514.984L520.831 473.541Z" fill="#91DBD4"/>
<path d="M521.173 474.294C521.567 474.414 521.909 474.619 522.166 474.927L545.767 503.069C546.058 503.412 546.212 503.84 546.246 504.319L504.179 514.128L521.173 474.294ZM520.489 472.805L520.061 473.815L503.066 513.648L502.125 515.856L504.453 515.309L546.52 505.5L547.529 505.26L547.461 504.233C547.41 503.497 547.153 502.813 546.708 502.299L523.107 474.157C522.714 473.678 522.183 473.335 521.55 473.147L520.506 472.822L520.489 472.805Z" fill="white"/>
<path d="M480.424 535.611L495.878 531.999L502.108 517.397L546.383 507.075L544.86 508.582C544.688 508.753 544.5 508.924 544.312 509.078L465.192 575.479C464.901 575.718 464.61 575.941 464.319 576.129L462.659 577.208L480.424 535.594V535.611Z" fill="#91DBD4"/>
<path d="M544.449 508.153C544.295 508.307 544.124 508.462 543.935 508.616L464.816 575.016C464.542 575.239 464.268 575.444 463.994 575.615L480.852 536.107L496.306 532.495L502.536 517.894L544.432 508.119M548.317 506.014L544.158 506.989L502.262 516.764L501.663 516.901L501.423 517.466L495.433 531.502L480.578 534.96L479.979 535.097L479.739 535.662L462.882 575.17L461.324 578.799L464.644 576.66C464.97 576.454 465.295 576.215 465.586 575.958L544.706 509.557C544.911 509.386 545.099 509.198 545.287 509.026L548.317 506.014Z" fill="white"/>
<path d="M435.892 542.68C436.183 542.338 436.508 542.012 436.868 541.704L515.988 475.304C516.262 475.081 516.553 474.859 516.826 474.67L518.504 473.592L494.355 530.167L434.677 544.084L435.892 542.68Z" fill="#91DBD4"/>
<path d="M517.169 475.184L499.506 516.592L493.927 529.653L480.099 532.872L436.372 543.074C436.645 542.766 436.936 542.458 437.279 542.167L516.398 475.766C516.655 475.543 516.912 475.355 517.186 475.184M519.838 472L516.501 474.174C516.193 474.379 515.885 474.602 515.594 474.842L436.474 541.242C436.098 541.55 435.755 541.91 435.43 542.286L433 545.111L436.611 544.272L480.338 534.07L494.167 530.852L494.766 530.715L495.005 530.15L500.585 517.089L518.247 475.68L519.804 472.017L519.838 472Z" fill="white"/>
<path d="M459.818 577.087C459.305 576.916 458.894 576.642 458.569 576.266L434.968 548.124C434.694 547.798 434.506 547.405 434.404 546.942L434.284 546.36L477.857 536.192L460.332 577.241L459.801 577.07L459.818 577.087Z" fill="#91DBD4"/>
<path d="M476.83 537.065L460.007 576.505C459.613 576.385 459.288 576.18 459.031 575.872L435.43 547.73C435.208 547.473 435.071 547.165 435.003 546.823L476.847 537.065M478.901 535.354L476.573 535.901L434.729 545.659L433.582 545.932L433.822 547.096C433.941 547.644 434.164 548.141 434.506 548.551L458.107 576.693C458.501 577.156 459.014 577.498 459.63 577.703L460.691 578.046L461.119 577.019L477.943 537.579L478.884 535.371L478.901 535.354Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_4343_7096">
<rect width="718" height="661" fill="white"/>
</clipPath>
</defs>
</svg>
    </div>
    
    {/* Right Side - Content */}
    <div class="newsletter-content">
      <h1 
        class="newsletter-title"
        data-directus={setAttr({ collection: 'blocks', item: block.id, fields: 'heading', mode: 'popover' })}
      >
        {heading || 'Stay in touch'}
      </h1>
      
      <div 
        class="newsletter-text"
        data-directus={setAttr({ collection: 'blocks', item: block.id, fields: 'content', mode: 'popover' })}
        set:html={content || `
          <p>Sign up to our newsletter to receive insights</p>
          <p>from the creative and financial worlds to</p>
          <p>protect, inspire and expand what creativity</p>
          <p>can achieve.</p>
        `}
      >
      </div>
      
      <form class="newsletter-form" id="cta-newsletter-form">
        <input
          type="email"
          name="email"
          placeholder={getLocalizedField(block, 'text') || 'Enter your email'}
          class="newsletter-email"
          required
        />
        <button 
          type="submit"
          class="newsletter-button"
          data-directus={setAttr({ collection: 'blocks', item: block.id, fields: ['button_text', 'button_link'], mode: 'popover' })}
        >
          <span class="btn-text">{buttonText || 'Join now'}</span>
          <span class="btn-loading" style="display: none;">...</span>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M5 12h14" />
            <path d="M12 5l7 7-7 7" />
          </svg>
        </button>
      </form>
      <p class="cta-form-message" style="display: none; margin-top: 10px; font-size: 14px;"></p>
      
      <script is:inline>
        (function() {
          const form = document.getElementById('cta-newsletter-form');
          const message = document.querySelector('.cta-form-message');
          const btnText = form?.querySelector('.btn-text');
          const btnLoading = form?.querySelector('.btn-loading');
          const locale = document.documentElement.lang || 'en';
          
          const messages = {
            en: { success: 'Thanks for subscribing!', error: 'Something went wrong.', already: 'Already subscribed.' },
            nl: { success: 'Bedankt voor je inschrijving!', error: 'Er ging iets mis.', already: 'Al ingeschreven.' }
          };
          const t = messages[locale] || messages.en;
          
          form?.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = form.querySelector('input[name="email"]')?.value?.trim();
            if (!email) return;
            
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline';
            
            try {
              const res = await fetch('/api/subscribe', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, source: 'cta-widget' })
              });
              const data = await res.json();
              
              if (data.success) {
                message.textContent = t.success;
                message.style.color = '#27ae60';
                form.querySelector('input[name="email"]').value = '';
              } else if (res.status === 409) {
                message.textContent = t.already;
                message.style.color = '#f39c12';
              } else {
                message.textContent = t.error;
                message.style.color = '#e74c3c';
              }
            } catch (err) {
              message.textContent = t.error;
              message.style.color = '#e74c3c';
            }
            
            message.style.display = 'block';
            btnText.style.display = 'inline';
            btnLoading.style.display = 'none';
          });
        })();
      </script>
    </div>
  </div>
</section>